import std.io;

public proc void writer(chan<int>.write out, chan<boolean>.read ack) {
  out.write(42);
  println("Number written");
  
}

public proc void reader(chan<int>.read in, chan<boolean>.write ack) {
  int v;
  v = in.read({println(v);});
}

public proc void main(string args[]) {
  chan<int> c;
  chan<boolean> ack;
  par {
    writer(c.write, ack.read);
    reader(c.read, ack.write);
  }
}